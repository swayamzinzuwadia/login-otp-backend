# login-otp-backend
# Authentication System with Node.js, Express, Sequelize, and MySQL

## Project Overview

This is a backend authentication system built using **Node.js, Express, MySQL, and Sequelize**. The system includes user registration, login, OTP verification, and JWT-based authentication.

## Features

- User **registration** with hashed passwords
- User **login** with OTP generation
- **OTP verification** to complete login
- JWT-based **authentication**
- Uses **Sequelize ORM** for MySQL database management

## Technologies Used

- **Node.js**
- **Express.js** (for handling routes and API endpoints)
- **MySQL** (relational database for user data)
- **Sequelize** (ORM for managing database interactions)
- **Bcrypt** (for password hashing)
- **JSON Web Token (JWT)** (for authentication)

## Folder Structure

```
/auth-system
│── controllers/      # Handles request logic
│── models/           # Database models (Sequelize)
│── routes/           # API route definitions
│── index.js          # Main server file
│── package.json      # Dependencies and scripts
│── README.md         # Project documentation
```

## Database Setup

### 1. Create Database in MySQL

Before running the project, create a database in MySQL Workbench or the terminal:

```sql
CREATE DATABASE auth_db;
USE auth_db;
```

### 2. Create User Table

If you want to manually create the `Users` table in MySQL Workbench, use the following SQL:

```sql
CREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    otp VARCHAR(6) DEFAULT NULL,
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

## Installation & Setup

### 1. Clone the Repository

```sh
git clone https://github.com/your-repo/auth-system.git
cd auth-system
```

### 2. Install Dependencies

```sh
npm install
```

### 3. Configure Database Connection

Edit `models/database.js` to match your MySQL credentials:

```javascript
const sequelize = new Sequelize('auth_db', 'root', 'your_password', {
  host: 'localhost',
  dialect: 'mysql'
});
```

### 4. Run the Server

```sh
node index.js
```

Server will start at [**http://localhost:3000**](http://localhost:3000)

## API Endpoints

| Endpoint               | Method | Description               |
| ---------------------- | ------ | ------------------------- |
| `/api/auth/register`   | POST   | Register a new user       |
| `/api/auth/login`      | POST   | Login with OTP generation |
| `/api/auth/verify-otp` | POST   | Verify OTP & authenticate |

## Example Requests

### Register a User

```sh
POST /api/auth/register
{
  "username": "john_doe",
  "email": "john@example.com",
  "password": "securepassword"
}
```

### Login (Generates OTP)

```sh
POST /api/auth/login
{
  "username": "john_doe",
  "password": "securepassword"
}
```

### Verify OTP

```sh
POST /api/auth/verify-otp
{
  "username": "john_doe",
  "otp": "123456"
}
```

## Troubleshooting

- **Cannot connect to MySQL?** Check if MySQL is running and your credentials are correct.
- **Server crashes?** Ensure dependencies are installed (`npm install`) and database is created.
- **Invalid OTP?** Ensure you are using the latest OTP generated by the system.

## License

This project is open-source and available for modification and distribution.

